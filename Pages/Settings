local Vhub = _G.Vhub

local Option = Vhub.Libs.Option
local Slider = Vhub.Libs.Slider
local Gui = Vhub.Gui

local Settings = Gui.DragFrame.Settings
local SettingsButton = Gui.DragFrame.Frame.Main.Title.Settings

local Services = {
	TweenService = game:GetService('TweenService')
}

local Active = false

SettingsButton.Activated:Connect(function()
	Active = not Active
	Settings.Visible = Active
	if Active then
		Services.TweenService:Create(
			SettingsButton.Fill, 
			TweenInfo.new(0.3, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut), 
			{ImageTransparency = 0}
		):Play()
	else
		Services.TweenService:Create(
			SettingsButton.Fill, 
			TweenInfo.new(0.3, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut), 
			{ImageTransparency = 1}
		):Play()
	end
end)

local DragSpeed = Option:New('DragSpeed', function(Value)
	if Value >= 8 and Value <= 35 then
		return true
	end
	return false
end)
DragSpeed:Load()

local Theme = Option:New('Theme', function(Value)
	if Value == 'Red' or Value == 'Yellow' or Value == 'Green' or Value == 'Blue' then
		return true
	end
	return false
end)
Theme:Load()

for _, Button in pairs(Settings.Themes) do
	if not Button:IsA('Button') then continue end
	
	Button.Activated:Connect(function()
		Theme:Set(Button.Name)
	end)
end

local DragSlider = Slider:New(Settings.DragSpeed, 35, 8)
DragSlider:Set((Vhub.Options.DragSpeed-8)/35)
Settings.DragSpeed.Text.Text = Vhub.Options.DragSpeed
DragSlider:OnRelease(function(Value)
	DragSpeed:Set(Value)
	Settings.DragSpeed.Text.Text = Vhub.Options.DragSpeed
end)

